{% extends 'teledm/base.html' %}
{% load staticfiles %}

{% block css%}
    <link rel="stylesheet" type="text/css" href="{% static 'teledm/css/form.css' %}" >
{% endblock %}
{% block navbar %}
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="margin-bottom: 0">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <a class="navbar-brand pull-right" href="https://cnes.fr/fr"><img src="{% static 'teledm/images/cnes.jpeg' %}" height="50px"></a>
            <a class="navbar-brand pull-right" href="http://climatologie.u-bourgogne.fr/"><img src="{% static 'teledm/images/crc.png' %}" height="50px"/></a>
            <div class="collapse navbar-collapse" id="nav">
                <ul class="nav navbar-nav">
                    <li>
                        <a href={% url 'portailCRC:home' %}><b>Portail</b></a>
                    </li>
                    <li>
                        <a href={% url 'teledm:home' %}><b>Accueil TeleDM</b></a>
                    </li>
                    <li>
                        <a href={% url 'teledm:mapViewer' %}><b>Cartographie</b></a>
                    </li>
                    <li class="active">
                        <a href={% url 'teledm:mapDist' %}><b>Extraction Géographique</b></a>
                    </li>
                    <li>
                        <a href={% url 'teledm:calval' %}><b>Calibration/Validation</b></a>
                    </li>
                    <li>
                        
                    </li>
                </ul>
            </div>
        </div>
    </nav>
{% endblock %}
{% block form %}
</br>
<div class="row">
    <form id="moyenne" action="" method="post" class="form-horizontal">{% csrf_token %}      
        <div class="row" id="Sat">
            <div class="row">
                <label>Sélection de la donnée spatialisée</label>
            </div>
            <div class="row">
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <select class="form-control" name="type" id="typeSel" >
                        <option selected hidden>Type de données</option>
                    </select>
                    <select class="form-control" name="capteur" id="capteurSel" >
                        <option selected hidden>Capteur/Source</option>
                    </select>
                    <select class="form-control" name="produit" id="produitSel" >
                        <option selected hidden>Produit</option>
                    </select>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <select class="form-control" name="resospatiale" id="resospatialeSel" >
                        <option selected hidden>Résolution spatiale</option>
                    </select>
                    <select class="form-control" name="pasdetemps" id="pasdetempsSel" >
                        <option selected hidden>Résolution temporelle</option>
                    </select>
                    <select class="form-control" name="variables" id="variableSel" >
                        <option selected hidden>Variable</option>
                    </select>
                    <select class="form-control" name="level1" id="levelSel" >
                        <option data-hidden="true">Layer</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row" id="Periode">
            <div class="row">
                <label>Période de traitement : </label>
            </div>
            <div class="row">
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <div class="input-group">
                        <label for="date1" class="input-group-addon btn"><span class="glyphicon glyphicon-calendar"></span> </label>
                        <input id="date1" name="datedebut" type="text" class="date-picker form-control"/>
                    </div>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <div class="input-group">
                        <label for="date2" class="input-group-addon btn"><span class="glyphicon glyphicon-calendar"></span> </label>
                        <input id="date2" name="datefin" type="text" class="date-picker form-control"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" id="Zone">
            <div class="row">
                    <label>Zone et découpage géographique</label>
            </div>
            <div class="row">
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <select class="form-control" name="pays" id="pays">
                        <option selected hidden>Pays</option>
                    </select>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                    <select class="form-control" name="decoupage" id="decoupage" >
                        <option selected hidden><b>Echelle de découpage</b></option>
                    </select>
                </div>
            </div>
        </div>
        </br>
        <div>
            <input type="submit" value="Extraction" name="submit">
        </div>
    </form>
    <form action="" method="post" class="form-horizontal">{% csrf_token %}
        <input class="form-control" type="hidden" name= "filename" id="filename" value="">
        <input id="download" type="submit" value="Téléchargement" name="submit" title="Téléchargement de l'extraction au format netcdf">
    </form>
    <div class="row">
        <label>Scripts de conversion netcdf vers csv: </label>
        <a href="{% url 'teledm:scriptPy' %}">readNC.py</a>
        <a href="{% url 'teledm:scriptR' %}">readNC.R</a>
    </div>
</div>
{% endblock %}


{% block content1 %}
        <div class="row">
            <div id="mapcontainer"></div>
        </div>
        <div class="row">
            <select id="dates" name="dates" style="width: 100px !important; min-width: 50px; max-width: 50px;">
            </select>
            <select id="calcul" name="calcul" style="width: 140px !important; min-width: 50px; max-width: 50px;">
                <option value="lvmean">valeurs moyennes</option>
                <option value="lvmax">valeurs maximales</option>
                <option value="lvmin">valeurs minimales</option>
                <option value="lvstd">valeurs d'écart type</option>
            </select>
            <select id="colorAxis" name="color" style="width: 140px !important; min-width: 50px; max-width: 50px;">
                <option selected hidden><b>couleur carto</b></option>
                <option value="jaune">jaune</option>
                <option value="bleu">bleu</option>
                <option value="brun">brun</option>
                <option value="brun2">brun 2</option>
                <option value="vert">vert</option>
            </select>
            <A HREF="{% url 'teledm:stations' %}" onClick="return popup(this, 'notes')">stations Aeronet/teom</A>
        </div>
{% endblock %}


{% block content2 %}
    <div class="row" id="containerProfil">
        <div class="row">
            <label>Après l'étape d'extraction, un click gauche sur l'une des zones géographiques de la carte affichera le profil temporel sur la période précédemment sélectionnée</br>
            Il est possible de mettre en regard des mesures (aeronet, teom ou météorologique) et des données épidémiologiques en sélectionnant les paramètres dans les menus ci-dessous
            </label>
        </div>
        </br>
        <div class="row">
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="row">
                    <label>Mesures in situ</label>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="mesure" id="mesureIS" >
                            <option selected hidden>Type</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">                    
                        <select class="form-control" name="stations" id="stationsIS" >
                            <option selected hidden>Station</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="niveau" id="niveauIS" >
                            <option selected hidden>Niveau</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="variables" id="variablesIS" >
                            <option selected hidden>Variable</option>
                        </select>
                    </div>
                    <div class="col-lg-4">
                        <select class="form-control" name="resoTempo" id="resoTempoIS" >
                            <option selected hidden>Resolution Temporelle</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">                    
                        <input type="button" id="addIS" value="Plot"/>
                    </div>
                </div>                
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                <div class="row">
                    <label>Donnees Epidemiologiques</label>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="epidemio" id="epidemioEP" >
                            <option selected hidden>Type</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="pays" id="paysEP" >
                            <option selected hidden>Pays</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="echelle" id="echelleEP" >
                            <option selected hidden>Echelle</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="district" id="districtEP" >
                            <option selected hidden>District</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <select class="form-control" name="variables" id="variableEP" >
                            <option selected hidden>Variable</option>
                        </select>
                    </div>
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <input type="button" id="addEP" value="Plot"/>
                    </div>
                </div>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                </br>
                <input type="button" id="clear" value="Clear" name="clear"/>
            </div>
        </div>
        <div class="row">
            <div id="plotcontainer" ></div>
        </div>
    </div>
{% endblock %}

{% block js%}
    <script type="text/javascript">
        var addr = "{% static 'teledm/shapes/' %}";
    </script>
    <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
    <script type="text/javascript" src="https://code.highcharts.com/maps/modules/map.js"></script>
    <script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"></script>
    <script type="text/javascript" src="{% static 'highcharts-export-csv/export-csv.js' %}"></script>
    <script type="text/javascript" src="{% static 'teledm/js/mapDistForm.js' %}"></script>
    <script type="text/javascript" src="{% static 'teledm/js/distPlot.js' %}"></script>
    <script type="text/javascript" src="{% static 'teledm/js/home.js' %}"></script>
{% endblock %}
